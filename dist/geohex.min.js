"use strict";!function(t,r){if("function"==typeof define&&define.amd)define(["exports"],r);else if("undefined"!=typeof exports)r(exports);else{var a={exports:{}};r(a.exports),t.geohex=a.exports}}(this,function(t){function r(t,r){var a=t*l/180,n=Math.log(Math.tan((90+r)*Math.PI/360))/(Math.PI/180);return n*=l/180,{x:a,y:n}}function a(t,r){var a=t/l*180,n=r/l*180;return n=180/Math.PI*(2*Math.atan(Math.exp(n*Math.PI/180))-Math.PI/2),{lon:a,lat:n}}function n(t){return l/Math.pow(3,t+1)}function e(t,e,o,h,i){var l={code:i,lat:t,lon:e,centroid:[t,e]};return l.getLevel=function(){return this.code.length-2},l.getHexSize=function(){return n(this.getLevel()+2)},l.getHexCoords=function(){var t=this.lat,n=this.lon,e=r(n,t),o=e.x,h=e.y,i=Math.tan(Math.PI*(60/180)),l=this.getHexSize(),c=a(o,h+i*l).lat,f=a(o,h-i*l).lat,u=a(o-2*l,h).lon,s=a(o+2*l,h).lon,M=a(o-1*l,h).lon,v=a(o+1*l,h).lon;return[[t,u],[c,M],[c,v],[t,s],[f,v],[f,M]]},l}function o(t,o,h){h+=2;var c=n(h),u=r(o,t),s=u.x,M=u.y,v=6*c,g=6*c*f,p=(s+M/f)/v,d=(M-f*s)/g,x=Math.floor(p),A=Math.floor(d),w=p-x,y=d-A,I=Math.round(p),P=Math.round(d);y>-w+1?2*w>y&&y>.5*w&&(I=x+1,P=A+1):-w+1>y&&y>2*w-1&&.5*w+.5>y&&(I=x,P=A);var b=(f*I*v+P*g)/2,m=(b-P*g)/f,H=a(m,b),L=H.lon,O=H.lat;if(c>l-m){L=180;var S=I;I=P,P=S}for(var z="",B=new Array,C=new Array,Z="",j="",_=I,k=P,q=0;h>=q;q++){var D=Math.pow(3,h-q);_>=Math.ceil(D/2)?(B[q]=2,_-=D):_<=-Math.ceil(D/2)?(B[q]=0,_+=D):B[q]=1,k>=Math.ceil(D/2)?(C[q]=2,k-=D):k<=-Math.ceil(D/2)?(C[q]=0,k+=D):C[q]=1}for(var q=0;q<B.length;q++)Z+=""+B[q]+C[q],j+=parseInt(Z,3),z+=j,j="",Z="";var E=z.substring(3),F=z.substring(0,3),G=Math.floor(F/30),J=F%30;return z=i.charAt(G)+i.charAt(J)+E,new e(O,L,I,P,z)}function h(t){var r=t.length,o=n(r),h=6*o,l=6*o*f,c=0,s=0,M=""+(30*i.indexOf(t.charAt(0))+i.indexOf(t.charAt(1)))+t.substring(2);M.charAt(0).match(/[15]/)&&M.charAt(1).match(/[^125]/)&&M.charAt(2).match(/[^125]/)&&(5==M.charAt(0)?M="7"+M.substring(1,M.length):1==M.charAt(0)&&(M="3"+M.substring(1,M.length)));for(var v=M.length,g=0;r+1-v>g;g++)M="0"+M,v++;for(var p="",g=0;v>g;g++){var d=parseInt(M.charAt(g)).toString(3);d?1==d.length&&(p+="0"):p+="00",p+=d}for(var x=new Array,A=new Array,g=0;g<p.length/2;g++)x[g]=p.charAt(2*g),A[g]=p.charAt(2*g+1);for(var g=0;r>=g;g++){var w=Math.pow(3,r-g);0==x[g]?c-=w:2==x[g]&&(c+=w),0==A[g]?s-=w:2==A[g]&&(s+=w)}var y=(f*c*h+s*l)/2,I=(y-s*l)/f,P=a(I,y);return P.lon>180+u?(P.lon-=360,c-=Math.pow(3,r),s+=Math.pow(3,r)):P.lon<-(180-u)&&(P.lon+=360,c+=Math.pow(3,r),s-=Math.pow(3,r)),new e(P.lat,P.lon,c,s,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.getZoneByLocation=o,t.getZoneByCode=h;var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",l=20037508.34,c=Math.PI*(30/180),f=Math.tan(c),u=1e-10});