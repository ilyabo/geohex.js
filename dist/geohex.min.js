"use strict";!function(t,r){if("function"==typeof define&&define.amd)define(["exports"],r);else if("undefined"!=typeof exports)r(exports);else{var n={exports:{}};r(n.exports),t.geohex=n.exports}}(this,function(t){function r(t,r){var n=t*l/180,e=Math.log(Math.tan((90+r)*Math.PI/360))/(Math.PI/180);return e*=l/180,{x:n,y:e}}function n(t,r){var n=t/l*180,e=r/l*180;return e=180/Math.PI*(2*Math.atan(Math.exp(e*Math.PI/180))-Math.PI/2),{lon:n,lat:e}}function e(t){return l/Math.pow(3,t+1)}function a(t,r){return[(t[0]+r[0])/2,(t[1]+r[1])/2]}function o(t,r){var n=h(r[1]-t[1]),e=h(r[0]-t[0]),a=h(t[1]),o=h(r[1]),i=Math.sin(n/2)*Math.sin(n/2)+Math.sin(e/2)*Math.sin(e/2)*Math.cos(a)*Math.cos(o),u=2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i)),c=6373;return c*u}function h(t){return t*Math.PI/180}function i(t,h,i,u,c){var s={code:c,lat:t,lon:h,centroid:[t,h]};return s.getLevel=function(){return this.code.length-2},s.getHexSize=function(){return e(this.getLevel()+2)},s.getInnerRadius=function(){var t=this.getCoords();return 1e3*o(a(t[0],t[1]),a(t[3],t[4]))/2},s.getOuterRadius=function(){var t=this.getCoords();return 1e3*o(t[0],t[3])/2},s.getCoords=function(){var t=this.lat,e=this.lon,a=r(e,t),o=a.x,h=a.y,i=Math.tan(Math.PI*(60/180)),u=this.getHexSize(),c=n(o,h+i*u).lat,s=n(o,h-i*u).lat,f=n(o-2*u,h).lon,l=n(o+2*u,h).lon,M=n(o-1*u,h).lon,g=n(o+1*u,h).lon;return[[f,t],[M,c],[g,c],[l,t],[g,s],[M,s]]},s.getPolygon=function(){var t=s.getCoords();return t.push(t[0]),{type:"Feature",geometry:{type:"Polygon",coordinates:[t]},properties:{code:s.code}}},s.getWKT=function(){var t=s.getCoords();return t.push(t[0]),"POLYGON (("+t.map(function(t){return t.join(" ")}).join(", ")+"))"},s}function u(t,a,o){o+=2;var h=e(o),u=r(a,t),c=u.x,s=u.y,M=6*h,v=6*h*g,d=(c+s/g)/M,p=(s-g*c)/v,y=Math.floor(d),A=Math.floor(p),x=d-y,w=p-A,P=Math.round(d),I=Math.round(p);w>-x+1?2*x>w&&w>.5*x&&(P=y+1,I=A+1):-x+1>w&&w>2*x-1&&.5*x+.5>w&&(P=y,I=A);var b=(g*P*M+I*v)/2,m=(b-I*v)/g,C=n(m,b),O=C.lon,L=C.lat;if(h>l-m){O=180;var j=P;P=I,I=j}for(var S="",Z=new Array,q=new Array,z="",B="",H=P,R=I,W=0;o>=W;W++){var F=Math.pow(3,o-W);H>=Math.ceil(F/2)?(Z[W]=2,H-=F):H<=-Math.ceil(F/2)?(Z[W]=0,H+=F):Z[W]=1,R>=Math.ceil(F/2)?(q[W]=2,R-=F):R<=-Math.ceil(F/2)?(q[W]=0,R+=F):q[W]=1}for(var W=0;W<Z.length;W++)z+=""+Z[W]+q[W],B+=parseInt(z,3),S+=B,B="",z="";var G=S.substring(3),K=S.substring(0,3),N=Math.floor(K/30),T=K%30;return S=f.charAt(N)+f.charAt(T)+G,new i(L,O,P,I,S)}function c(t){var r=t.length,a=e(r),o=6*a,h=6*a*g,u=0,c=0,s=""+(30*f.indexOf(t.charAt(0))+f.indexOf(t.charAt(1)))+t.substring(2);s.charAt(0).match(/[15]/)&&s.charAt(1).match(/[^125]/)&&s.charAt(2).match(/[^125]/)&&(5==s.charAt(0)?s="7"+s.substring(1,s.length):1==s.charAt(0)&&(s="3"+s.substring(1,s.length)));for(var l=s.length,M=0;r+1-l>M;M++)s="0"+s,l++;for(var d="",M=0;l>M;M++){var p=parseInt(s.charAt(M)).toString(3);p?1==p.length&&(d+="0"):d+="00",d+=p}for(var y=new Array,A=new Array,M=0;M<d.length/2;M++)y[M]=d.charAt(2*M),A[M]=d.charAt(2*M+1);for(var M=0;r>=M;M++){var x=Math.pow(3,r-M);0==y[M]?u-=x:2==y[M]&&(u+=x),0==A[M]?c-=x:2==A[M]&&(c+=x)}var w=(g*u*o+c*h)/2,P=(w-c*h)/g,I=n(P,w);return I.lon>180+v?(I.lon-=360,u-=Math.pow(3,r),c+=Math.pow(3,r)):I.lon<-(180-v)&&(I.lon+=360,u+=Math.pow(3,r),c-=Math.pow(3,r)),new i(I.lat,I.lon,u,c,t)}function s(t,r){var n,a,o=t[0][1],h=t[0][0],i=t[1][1],c=t[1][0],s=(e(r)/2,[]),f={};for(n=o;i>=n;n++)for(a=h;c>=a;a++){var l=u(n,a,r);f[l.code]||(f[l.code]=!0,s.push(l))}return s}Object.defineProperty(t,"__esModule",{value:!0}),t.getZoneByLocation=u,t.getZoneByCode=c,t.getZonesWithin=s;var f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",l=20037508.34,M=Math.PI*(30/180),g=Math.tan(M),v=1e-10});